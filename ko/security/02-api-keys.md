# API í‚¤ ì´í•´

{% hint style="info" %}
ğŸ’¡ bkend API í‚¤ì˜ êµ¬ì¡°, ìƒì„± ë°©ì‹, ë³´ì•ˆ íŠ¹ì„±ì„ ì´í•´í•©ë‹ˆë‹¤.
{% endhint %}

## ê°œìš”

API í‚¤ëŠ” bkend ì„œë¹„ìŠ¤ APIì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì¸ì¦ ìˆ˜ë‹¨ì…ë‹ˆë‹¤. ì½˜ì†”ì—ì„œ ìƒì„±í•˜ë©°, `Authorization: Bearer {api_key}` í—¤ë”ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

***

## API í‚¤ êµ¬ì¡°

### í‚¤ í˜•ì‹

```
ak_a1b2c3d4e5f6...  (ak_ + 64ì hex)
```

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… |
|----------|------|
| `ak_` | API í‚¤ prefix |
| 64ì hex | 32ë°”ì´íŠ¸ ëœë¤ ê°’ (ì•”í˜¸í•™ì  ë‚œìˆ˜) |

### ë³´ì•ˆ ì €ì¥ ë°©ì‹

API í‚¤ëŠ” ìƒì„± ì‹œ **SHA-256 í•´ì‹œ**ë¡œ ë³€í™˜ë˜ì–´ ì €ì¥ë©ë‹ˆë‹¤. ì›ë³¸ í‚¤ëŠ” ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```mermaid
flowchart LR
    A[í‚¤ ìƒì„±] -->|randomBytes 32| B[ak_xxx...xxx]
    B -->|SHA-256| C[í•´ì‹œê°’ ì €ì¥]
    B -->|1íšŒ ë°˜í™˜| D[ì‚¬ìš©ìì—ê²Œ í‘œì‹œ]
```

{% hint style="danger" %}
ğŸš¨ **ìœ„í—˜** â€” API í‚¤ëŠ” ìƒì„± ì‹œ **ë‹¨ í•œ ë²ˆë§Œ** í‘œì‹œë©ë‹ˆë‹¤. ì•ˆì „í•œ ê³³ì— ì¦‰ì‹œ ì €ì¥í•˜ì„¸ìš”.
{% endhint %}

***

## API í‚¤ ì†ì„±

| ì†ì„± | ì„¤ëª… |
|------|------|
| Organization | í‚¤ê°€ ì†í•œ ì¡°ì§ |
| í”„ë¡œì íŠ¸ ë²”ìœ„ | ì ‘ê·¼ ê°€ëŠ¥í•œ í”„ë¡œì íŠ¸ (ì „ì²´ ë˜ëŠ” íŠ¹ì •) |
| ìŠ¤ì½”í”„ | ê¶Œí•œ ë²”ìœ„ (ì½ê¸°, ì“°ê¸° ë“±) |
| ë§Œë£Œ ì‹œê°„ | ì„ íƒ ì‚¬í•­ (ë¯¸ì„¤ì • ì‹œ ì˜êµ¬) |
| ìƒì„±ì | í‚¤ë¥¼ ìƒì„±í•œ ì‚¬ìš©ì |

***

## API í‚¤ ê²€ì¦ íë¦„

```mermaid
sequenceDiagram
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant A as bkend API
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    C->>A: Authorization: Bearer ak_xxx...
    A->>A: 1. Prefix í™•ì¸ (ak_)
    A->>A: 2. SHA-256 í•´ì‹œ ìƒì„±
    A->>DB: 3. í•´ì‹œë¡œ ì¡°íšŒ
    DB-->>A: 4. í‚¤ ì •ë³´ ë°˜í™˜
    A->>A: 5. íê¸°/ë§Œë£Œ í™•ì¸
    A-->>C: 6. ìš”ì²­ ì²˜ë¦¬
```

### ê²€ì¦ ì‹¤íŒ¨ ì‚¬ìœ 

| ì‚¬ìœ  | HTTP | ì„¤ëª… |
|------|:----:|------|
| ì˜ëª»ëœ í˜•ì‹ | 401 | `ak_` prefixê°€ ì•„ë‹Œ ê²½ìš° |
| í‚¤ ì—†ìŒ | 401 | í•´ì‹œì— í•´ë‹¹í•˜ëŠ” í‚¤ê°€ ì—†ëŠ” ê²½ìš° |
| íê¸°ë¨ | 401 | í‚¤ê°€ íê¸°ëœ ê²½ìš° |
| ë§Œë£Œë¨ | 401 | ë§Œë£Œ ì‹œê°„ì´ ì§€ë‚œ ê²½ìš° |

***

## API í‚¤ ê´€ë¦¬

### ì½˜ì†”ì—ì„œ ê´€ë¦¬í•˜ê¸°

ì½˜ì†”ì˜ **í”„ë¡œì íŠ¸ ì„¤ì •** > **API í‚¤** ë©”ë‰´ì—ì„œ API í‚¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

â†’ [API í‚¤ ê´€ë¦¬ (ì½˜ì†”)](../console/11-api-keys.md)

### API í‚¤ ì‚¬ìš© ì˜ˆì‹œ

```bash
curl -X GET https://api-client.bkend.ai/v1/data/users \
  -H "Authorization: Bearer ak_your_api_key_here" \
  -H "X-Project-Id: {project_id}" \
  -H "X-Environment: dev"
```

***

## ë‹¤ìŒ ë‹¨ê³„

- [Public Key vs Secret Key](03-public-vs-secret.md) â€” í‚¤ ì¢…ë¥˜ë³„ ì‚¬ìš©ë²•
- [ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€](07-best-practices.md) â€” API í‚¤ ë³´ì•ˆ ê¶Œì¥ ì‚¬í•­
- [ë³´ì•ˆ ê°œìš”](01-overview.md) â€” ì „ì²´ ë³´ì•ˆ ì•„í‚¤í…ì²˜
