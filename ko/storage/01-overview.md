# ìŠ¤í† ë¦¬ì§€ ê°œìš”

{% hint style="info" %}
ğŸ’¡ bkend ìŠ¤í† ë¦¬ì§€ë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³ , ë©”íƒ€ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”.
{% endhint %}

## ìŠ¤í† ë¦¬ì§€ë€?

bkend ìŠ¤í† ë¦¬ì§€ëŠ” íŒŒì¼ ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ, ë©”íƒ€ë°ì´í„° ê´€ë¦¬ë¥¼ ìœ„í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. S3 Presigned URL ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©°, ë©”íƒ€ë°ì´í„° APIë¡œ íŒŒì¼ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

```mermaid
sequenceDiagram
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant B as bkend API
    participant S as S3 ìŠ¤í† ë¦¬ì§€

    C->>B: Presigned URL ìš”ì²­
    B-->>C: ì—…ë¡œë“œ URL ë°˜í™˜
    C->>S: íŒŒì¼ ì§ì ‘ ì—…ë¡œë“œ
    C->>B: ë©”íƒ€ë°ì´í„° ë“±ë¡
    B-->>C: íŒŒì¼ ì •ë³´ ë°˜í™˜
```

***

## í•µì‹¬ íŠ¹ì§•

### Presigned URL ì—…ë¡œë“œ

íŒŒì¼ì€ bkend ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  S3ì— ì§ì ‘ ì—…ë¡œë“œë©ë‹ˆë‹¤. ì„œë²„ ë¶€í•˜ ì—†ì´ ëŒ€ìš©ëŸ‰ íŒŒì¼ë„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ

ëŒ€ìš©ëŸ‰ íŒŒì¼ì€ ì—¬ëŸ¬ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë³‘ë ¬ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ í•´ë‹¹ íŒŒíŠ¸ë§Œ ì¬ì‹œë„í•˜ë©´ ë©ë‹ˆë‹¤.

### ë©”íƒ€ë°ì´í„° ê´€ë¦¬

íŒŒì¼ì˜ ì´ë¦„, í¬ê¸°, MIME íƒ€ì…, ì¹´í…Œê³ ë¦¬, íƒœê·¸ ë“± ë©”íƒ€ë°ì´í„°ë¥¼ ë³„ë„ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì ‘ê·¼ ì œì–´

íŒŒì¼ë§ˆë‹¤ ì ‘ê·¼ ë²”ìœ„(`visibility`)ë¥¼ ì„¤ì •í•˜ì—¬ ê³µê°œ/ë¹„ê³µê°œë¥¼ ì œì–´í•©ë‹ˆë‹¤.

| Visibility | ì„¤ëª… |
|-----------|------|
| `public` | ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥ |
| `private` | ì†Œìœ ìë§Œ ì ‘ê·¼ ê°€ëŠ¥ |
| `protected` | ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥ |
| `shared` | ì§€ì •ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥ |

***

## íŒŒì¼ ì¹´í…Œê³ ë¦¬

| ì¹´í…Œê³ ë¦¬ | ì„¤ëª… |
|---------|------|
| `images` | ì´ë¯¸ì§€ íŒŒì¼ |
| `documents` | ë¬¸ì„œ íŒŒì¼ |
| `media` | ë¯¸ë””ì–´ (ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤) |
| `attachments` | ì²¨ë¶€ íŒŒì¼ |
| `exports` | ë‚´ë³´ë‚´ê¸° íŒŒì¼ |
| `backups` | ë°±ì—… íŒŒì¼ |
| `temp` | ì„ì‹œ íŒŒì¼ |

***

## ì—…ë¡œë“œ íë¦„

### ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œ

```mermaid
flowchart LR
    A[Presigned URL ìš”ì²­] --> B[S3 ì—…ë¡œë“œ]
    B --> C[ë©”íƒ€ë°ì´í„° ë“±ë¡]
    C --> D[ì™„ë£Œ]
```

1. `POST /v1/files/presigned-url` â€” ì—…ë¡œë“œ URL ë°œê¸‰
2. S3ì— íŒŒì¼ ì§ì ‘ ì—…ë¡œë“œ (PUT)
3. `POST /v1/files` â€” ë©”íƒ€ë°ì´í„° ë“±ë¡

### ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ (ëŒ€ìš©ëŸ‰)

```mermaid
flowchart LR
    A[ì´ˆê¸°í™”] --> B[íŒŒíŠ¸ë³„ URL ë°œê¸‰]
    B --> C[íŒŒíŠ¸ ì—…ë¡œë“œ]
    C --> D[ì™„ë£Œ ìš”ì²­]
    D --> E[ë©”íƒ€ë°ì´í„° ë“±ë¡]
```

1. `POST /v1/files/multipart/init` â€” ì—…ë¡œë“œ ì´ˆê¸°í™”
2. `POST /v1/files/multipart/presigned-url` â€” íŒŒíŠ¸ë³„ URL ë°œê¸‰
3. S3ì— ê° íŒŒíŠ¸ ì—…ë¡œë“œ (PUT)
4. `POST /v1/files/multipart/complete` â€” ì—…ë¡œë“œ ì™„ë£Œ
5. `POST /v1/files` â€” ë©”íƒ€ë°ì´í„° ë“±ë¡

***

## í•„ìˆ˜ í—¤ë”

| í—¤ë” | í•„ìˆ˜ | ì„¤ëª… |
|------|:----:|------|
| `X-Project-Id` | âœ… | í”„ë¡œì íŠ¸ ID |
| `X-Environment` | âœ… | `dev` / `staging` / `prod` |
| `Authorization` | âœ… | `Bearer {accessToken}` |
| `Content-Type` | ì¡°ê±´ë¶€ | `application/json` â€” POST, PATCH ìš”ì²­ ì‹œ |

***

## ì´ ì„¹ì…˜ êµ¬ì„±

| ë¬¸ì„œ | ì„¤ëª… |
|------|------|
| [ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œ](02-upload-single.md) | Presigned URLë¡œ íŒŒì¼ ì—…ë¡œë“œ |
| [ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ](03-upload-multipart.md) | ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ |
| [íŒŒì¼ ë©”íƒ€ë°ì´í„°](04-file-metadata.md) | ë©”íƒ€ë°ì´í„° ë“±ë¡/ì¡°íšŒ/ìˆ˜ì • |
| [íŒŒì¼ ëª©ë¡ ì¡°íšŒ](05-file-list.md) | í•„í„°ë§/ì •ë ¬/í˜ì´ì§€ë„¤ì´ì…˜ |
| [íŒŒì¼ ë‹¤ìš´ë¡œë“œ](06-download.md) | Presigned URLë¡œ ë‹¤ìš´ë¡œë“œ |
| [íŒŒì¼ ì‚­ì œ](07-file-delete.md) | íŒŒì¼ ì‚­ì œ |
| [íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ](08-permissions.md) | Visibilityì™€ ì†Œìœ ì ì œì–´ |
| [API ë ˆí¼ëŸ°ìŠ¤](09-api-reference.md) | ì „ì²´ ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ |
