# API í‚¤ ì´í•´

{% hint style="info" %}
ğŸ’¡ bkend API í‚¤ì˜ êµ¬ì¡°, ìƒì„± ë°©ì‹, ë³´ì•ˆ íŠ¹ì„±ì„ ì´í•´í•©ë‹ˆë‹¤.
{% endhint %}

## ê°œìš”

API í‚¤ëŠ” bkend ì„œë¹„ìŠ¤ APIì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì¸ì¦ ìˆ˜ë‹¨ì…ë‹ˆë‹¤. ì½˜ì†”ì—ì„œ ìƒì„±í•˜ë©°, `Authorization: Bearer {api_key}` í—¤ë”ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

***

## API í‚¤ êµ¬ì¡°

### í‚¤ í˜•ì‹

```
ak_a1b2c3d4e5f6...  (ak_ + 64ì hex)
```

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… |
|----------|------|
| `ak_` | API í‚¤ prefix |
| 64ì hex | 32ë°”ì´íŠ¸ ëœë¤ ê°’ (ì•”í˜¸í•™ì  ë‚œìˆ˜) |

### ë³´ì•ˆ ì €ì¥ ë°©ì‹

API í‚¤ëŠ” ìƒì„± ì‹œ **SHA-256 í•´ì‹œ**ë¡œ ë³€í™˜ë˜ì–´ ì €ì¥ë©ë‹ˆë‹¤. ì›ë³¸ í‚¤ëŠ” ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```mermaid
flowchart LR
    A[í‚¤ ìƒì„±] -->|randomBytes 32| B[ak_xxx...xxx]
    B -->|SHA-256| C[í•´ì‹œê°’ ì €ì¥]
    B -->|1íšŒ ë°˜í™˜| D[ì‚¬ìš©ìì—ê²Œ í‘œì‹œ]
```

{% hint style="danger" %}
ğŸš¨ **ìœ„í—˜** â€” API í‚¤ëŠ” ìƒì„± ì‹œ **ë‹¨ í•œ ë²ˆë§Œ** í‘œì‹œë©ë‹ˆë‹¤. ì•ˆì „í•œ ê³³ì— ì¦‰ì‹œ ì €ì¥í•˜ì„¸ìš”.
{% endhint %}

***

## API í‚¤ ì†ì„±

| ì†ì„± | ì„¤ëª… |
|------|------|
| Organization | í‚¤ê°€ ì†í•œ ì¡°ì§ |
| í”„ë¡œì íŠ¸ ë²”ìœ„ | ì ‘ê·¼ ê°€ëŠ¥í•œ í”„ë¡œì íŠ¸ (ì „ì²´ ë˜ëŠ” íŠ¹ì •) |
| ìŠ¤ì½”í”„ | ê¶Œí•œ ë²”ìœ„ (ì½ê¸°, ì“°ê¸° ë“±) |
| ë§Œë£Œ ì‹œê°„ | ì„ íƒ ì‚¬í•­ (ë¯¸ì„¤ì • ì‹œ ì˜êµ¬) |
| ìƒì„±ì | í‚¤ë¥¼ ìƒì„±í•œ ì‚¬ìš©ì |

***

## API í‚¤ ê²€ì¦ íë¦„

```mermaid
sequenceDiagram
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant A as bkend API
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    C->>A: Authorization: Bearer ak_xxx...
    A->>A: 1. Prefix í™•ì¸ (ak_)
    A->>A: 2. SHA-256 í•´ì‹œ ìƒì„±
    A->>DB: 3. í•´ì‹œë¡œ ì¡°íšŒ
    DB-->>A: 4. í‚¤ ì •ë³´ ë°˜í™˜
    A->>A: 5. íê¸°/ë§Œë£Œ í™•ì¸
    A-->>C: 6. ìš”ì²­ ì²˜ë¦¬
```

### ê²€ì¦ ì‹¤íŒ¨ ì‚¬ìœ 

| ì‚¬ìœ  | HTTP | ì„¤ëª… |
|------|:----:|------|
| ì˜ëª»ëœ í˜•ì‹ | 401 | `ak_` prefixê°€ ì•„ë‹Œ ê²½ìš° |
| í‚¤ ì—†ìŒ | 401 | í•´ì‹œì— í•´ë‹¹í•˜ëŠ” í‚¤ê°€ ì—†ëŠ” ê²½ìš° |
| íê¸°ë¨ | 401 | í‚¤ê°€ íê¸°ëœ ê²½ìš° |
| ë§Œë£Œë¨ | 401 | ë§Œë£Œ ì‹œê°„ì´ ì§€ë‚œ ê²½ìš° |

***

## API í‚¤ ê´€ë¦¬

### ì½˜ì†”ì—ì„œ ê´€ë¦¬í•˜ê¸°

ì½˜ì†”ì˜ **MCP** ë©”ë‰´ì—ì„œ API í‚¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í† í° ìƒì„±, ê¶Œí•œ ì„¤ì •, íê¸° ë“±ì˜ ìƒì„¸ ë°©ë²•ì€ ì½˜ì†” ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

â†’ [API í‚¤ ê´€ë¦¬ (ì½˜ì†”)](../console/11-api-keys.md)

### 5ë¶„ ë§Œì— API Key ë°œê¸‰í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ê¸°

1. ì½˜ì†” â†’ **MCP** â†’ **ìƒˆ í† í° ìƒì„±**ì„ í´ë¦­í•˜ì„¸ìš”.
2. í† í° ì´ë¦„: `test-key`, íƒ€ì…: `BEARER_TOKEN`, ê¶Œí•œ: `Table Data (read, create)`.
3. **ìƒì„±** í›„ í‘œì‹œëœ í† í°ì„ ë³µì‚¬í•˜ì„¸ìš”.
4. curlë¡œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:

```bash
curl -X GET https://api-client.bkend.ai/v1/data/posts \
  -H "Authorization: Bearer {ë°œê¸‰ë°›ì€_í† í°}" \
  -H "X-Project-Id: {project_id}" \
  -H "X-Environment: dev"
```

{% hint style="success" %}
âœ… 200 ì‘ë‹µì´ ëŒì•„ì˜¤ë©´ API Keyê°€ ì •ìƒ ë™ì‘í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
{% endhint %}

### API í‚¤ ì‚¬ìš© ì˜ˆì‹œ (JavaScript)

```javascript
// API Keyë¥¼ Authorization í—¤ë”ì— í¬í•¨
const response = await fetch('https://api-client.bkend.ai/v1/data/posts', {
  headers: {
    'Authorization': 'Bearer {api_key}',
    'X-Project-Id': '{project_id}',
    'X-Environment': 'dev',
  },
});

const data = await response.json();
```

ì•±ì—ì„œ bkend APIë¥¼ ì—°ë™í•˜ëŠ” ìƒì„¸ ë°©ë²•ì€ [ì•±ì—ì„œ bkend ì—°ë™í•˜ê¸°](../getting-started/06-app-integration.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

***

## ë‹¤ìŒ ë‹¨ê³„

- [Public Key vs Secret Key](03-public-vs-secret.md) â€” í‚¤ ì¢…ë¥˜ë³„ ì‚¬ìš©ë²•
- [API í‚¤ ê´€ë¦¬ (ì½˜ì†”)](../console/11-api-keys.md) â€” ì½˜ì†”ì—ì„œ í† í° ìƒì„±/ê´€ë¦¬
- [ì•±ì—ì„œ bkend ì—°ë™í•˜ê¸°](../getting-started/06-app-integration.md) â€” ì•±ì— API Key ì„¤ì •í•˜ê¸°
- [ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€](07-best-practices.md) â€” API í‚¤ ë³´ì•ˆ ê¶Œì¥ ì‚¬í•­
